# entry

`entry` defines the **entry map**: keys are entry names, values are **JS/TS script paths** or **structured objects** relative to baseDir. When omitted, the framework discovers `background`, `content`, `popup`, `options`, `sidepanel`, `devtools` under [appDir](/config/app-dir) (default `app/`) by directory name.

## Type and baseDir

- **Type**: `Record<string, string | { src: string; html?: boolean | string }> | undefined`
- **baseDir**: When [appDir](/config/app-dir) is not set, baseDir = `app/`; when set, baseDir = `appDir`. All entry values are **relative to baseDir**.

## Reserved entry names

These names are fixed by the extension spec and framework:

| Name | Type | Description |
|------|------|--------------|
| `background` | Script only | Service worker / background script |
| `content` | Script only | Content script |
| `popup` | Script + HTML | Popup page |
| `options` | Script + HTML | Options page |
| `sidepanel` | Script + HTML | Side panel |
| `devtools` | Script + HTML | DevTools page |

Other names can be **custom entries** (e.g. `capture`, `offscreen`) as long as the directory has the corresponding script.

## Path rules

- **JS/TS entry only**: the real entry is always JS/TS (`.js`, `.jsx`, `.ts`, `.tsx`). HTML is **template only**.
- **HTML template rules**: if you use an HTML template, **do not import CSS or other resources** in the HTML. The HTML is not compiled; only the JS/TS entry is compiled.
- **Single main entry**: HTML templates must include **one** `<script>` tag with `data-extenzo-entry` and a JS/TS `src`:
  - Example: `<script type="module" src="./main.ts" data-extenzo-entry></script>`
- `background` and `content` are script-only entries (no HTML generated).
- For `popup`, `options`, `sidepanel`, `devtools`, HTML is generated by default. If a template exists, it is used as the template.

## When entry is omitted

The framework scans baseDir and discovers the reserved names by looking for scripts (e.g. `background/index.ts`, `popup/index.ts`, `popup.ts`). If only an HTML template exists, the framework reads **`data-extenzo-entry`** to locate the JS/TS entry and auto-generates `{ src, html }`.

## Supported layouts

- Flat files under baseDir: `popup.ts`, `content.ts`, `background.js`, etc.
- Single-level dirs: `popup/index.ts`, `content/index.ts`, `background/index.ts`.

Nested multi-level entry folders are not supported.

## Examples

### Default discovery (no entry config)

```
app/
  background/index.ts
  content/index.ts
  popup/index.ts
  popup/index.html     # optional HTML template
  options/index.ts
  options/index.html    # optional HTML template
```

No `entry` needed in config. The framework discovers script entries; if an `index.html` exists alongside the script, it is used as the HTML template.

### HTML template only (data-extenzo-entry)

```
app/
  popup/
    index.html          # template only
    main.ts             # real entry
```

```html
<!-- popup/index.html -->
<script type="module" src="./main.ts" data-extenzo-entry></script>
```

No `entry` needed. The framework reads `data-extenzo-entry` and auto-declares `{ src, html }`.

### Custom entries and overrides

```ts
// exo.config.ts
import { defineConfig } from "extenzo";

export default defineConfig({
  appDir: "src",
  entry: {
    background: "background/index.ts",
    content: "content/index.ts",
    popup: "popup/index.ts",
    options: "options/index.ts",
    sidepanel: "sidepanel/index.ts",
    capture: "capture/index.ts",
    offscreen: { src: "offscreen/index.ts", html: true },
    settings: { src: "settings/index.ts", html: "settings/index.html" },
  },
});
```

When `entry` is set, **only** the declared entries are used. You can mix reserved and custom names.

## Related

- [appDir](/config/app-dir): baseDir for entry paths.
- [manifest](/config/manifest): Framework fills manifest paths from entry and [outDir](/config/out-dir).
